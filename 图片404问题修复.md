# å›¾ç‰‡404é—®é¢˜ä¿®å¤

## ğŸ” é—®é¢˜åˆ†æ

### é”™è¯¯ä¿¡æ¯
```
GET http://127.0.0.1:3000/templates/images/14ee1759-6619-4152-a289-21387e9b7975.jpg 404 (Not Found)
GET http://127.0.0.1:3000/templates/images/xiaomi.png 404 (Not Found)
```

### é—®é¢˜åŸå› 

**å‰ç«¯è®¿é—®è·¯å¾„**: `http://127.0.0.1:3000/templates/images/xxx.jpg`
**åç«¯å®é™…è·¯å¾„**: `http://localhost:8080/templates/images/xxx.jpg`

**æ ¹æœ¬åŸå› **:
- âœ… å›¾ç‰‡è·¯å¾„å¤„ç†æ­£ç¡®ï¼ˆ`/templates/images/xxx.jpg`ï¼‰
- âŒ Viteå¼€å‘æœåŠ¡å™¨ï¼ˆç«¯å£3000ï¼‰æ— æ³•è®¿é—®åç«¯ï¼ˆç«¯å£8080ï¼‰çš„é™æ€èµ„æº
- âŒ Viteé…ç½®ä¸­ç¼ºå°‘ `/templates` è·¯å¾„çš„ä»£ç†

---

## âœ… ä¿®å¤æ–¹æ¡ˆ

### ä¿®æ”¹ `vite.config.js`

**æ–‡ä»¶**: `vite.config.js`

#### ä¿®æ”¹å‰:
```javascript
server: {
  port: 3000,
  proxy: {
    '/api': {
      target: 'http://localhost:8080',
      changeOrigin: true
    },
    // ... å…¶ä»–ä»£ç†é…ç½®
    '/images': {
      target: 'http://localhost:8080',
      changeOrigin: true
    }
  }
}
```

#### ä¿®æ”¹å:
```javascript
server: {
  port: 3000,
  proxy: {
    '/api': {
      target: 'http://localhost:8080',
      changeOrigin: true
    },
    // ... å…¶ä»–ä»£ç†é…ç½®
    '/images': {
      target: 'http://localhost:8080',
      changeOrigin: true
    },
    // âœ… æ–°å¢ï¼šä»£ç†templatesç›®å½•ä¸‹çš„é™æ€èµ„æº
    '/templates': {
      target: 'http://localhost:8080',
      changeOrigin: true
    }
  }
}
```

---

## ğŸ”§ åº”ç”¨ä¿®å¤

### âš ï¸ é‡è¦ï¼šå¿…é¡»é‡å¯å¼€å‘æœåŠ¡å™¨

Viteé…ç½®æ–‡ä»¶ä¿®æ”¹åï¼Œ**å¿…é¡»é‡å¯å¼€å‘æœåŠ¡å™¨**æ‰èƒ½ç”Ÿæ•ˆï¼

### é‡å¯æ­¥éª¤

1. **åœæ­¢å½“å‰å¼€å‘æœåŠ¡å™¨**
   - åœ¨è¿è¡Œ `npm run dev` çš„ç»ˆç«¯æŒ‰ `Ctrl+C`

2. **é‡æ–°å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
   ```bash
   npm run dev
   ```

3. **åˆ·æ–°æµè§ˆå™¨**
   - æŒ‰ `Ctrl+F5` å¼ºåˆ¶åˆ·æ–°é¡µé¢

---

## ğŸ“Š ä»£ç†å·¥ä½œåŸç†

### è¯·æ±‚æµç¨‹

```
æµè§ˆå™¨è¯·æ±‚
  â†“
http://127.0.0.1:3000/templates/images/xxx.jpg
  â†“
Viteä»£ç†æ£€æµ‹åˆ° /templates å‰ç¼€
  â†“
è½¬å‘åˆ°åç«¯
  â†“
http://localhost:8080/templates/images/xxx.jpg
  â†“
åç«¯è¿”å›å›¾ç‰‡
  â†“
Viteè½¬å‘ç»™æµè§ˆå™¨
  â†“
å›¾ç‰‡æ˜¾ç¤ºæˆåŠŸ âœ…
```

### ä»£ç†é…ç½®è¯´æ˜

| å‰ç«¯è¯·æ±‚è·¯å¾„ | ä»£ç†é…ç½® | åç«¯å®é™…è·¯å¾„ |
|------------|---------|------------|
| `/api/products` | `/api` â†’ `http://localhost:8080` | `http://localhost:8080/api/products` |
| `/templates/images/1.jpg` | `/templates` â†’ `http://localhost:8080` | `http://localhost:8080/templates/images/1.jpg` |
| `/images/1.jpg` | `/images` â†’ `http://localhost:8080` | `http://localhost:8080/images/1.jpg` |

---

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### æµ‹è¯•1: æ£€æŸ¥ä»£ç†é…ç½®

1. åœæ­¢å¼€å‘æœåŠ¡å™¨ï¼ˆ`Ctrl+C`ï¼‰
2. é‡æ–°å¯åŠ¨ï¼š`npm run dev`
3. æŸ¥çœ‹ç»ˆç«¯è¾“å‡ºï¼Œç¡®è®¤æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ

**é¢„æœŸè¾“å‡º**:
```
VITE v5.x.x  ready in xxx ms

âœ  Local:   http://127.0.0.1:3000/
âœ  Network: use --host to expose
âœ  press h + enter to show help
```

---

### æµ‹è¯•2: è®¿é—®å•†å®¶åå°

1. æ‰“å¼€æµè§ˆå™¨è®¿é—®: `http://127.0.0.1:3000/merchant-login`
2. ç™»å½•å•†å®¶è´¦å·
3. è¿›å…¥å•†å“ç®¡ç†é¡µé¢

**é¢„æœŸç»“æœ**:
- âœ… å•†å“åˆ—è¡¨æ­£å¸¸æ˜¾ç¤º
- âœ… å•†å“å›¾ç‰‡æ­£å¸¸åŠ è½½
- âœ… æµè§ˆå™¨æ§åˆ¶å°æ— 404é”™è¯¯

---

### æµ‹è¯•3: æ£€æŸ¥ç½‘ç»œè¯·æ±‚

1. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰
2. åˆ‡æ¢åˆ° **Networkï¼ˆç½‘ç»œï¼‰** æ ‡ç­¾
3. åˆ·æ–°å•†å“ç®¡ç†é¡µé¢
4. æŸ¥çœ‹å›¾ç‰‡è¯·æ±‚

**é¢„æœŸç»“æœ**:
```
Request URL: http://127.0.0.1:3000/templates/images/xxx.jpg
Status Code: 200 OK
Content-Type: image/jpeg
```

---

## ğŸ¯ å®Œæ•´çš„å›¾ç‰‡è®¿é—®æµç¨‹

### 1. åç«¯è¿”å›å•†å“æ•°æ®

```json
{
  "success": true,
  "records": [
    {
      "productId": 1,
      "productName": "å°ç±³æ‰‹æœº",
      "productImagePath": "images/xiaomi.png",
      "productPrice": 2999
    }
  ]
}
```

### 2. å‰ç«¯å¤„ç†å›¾ç‰‡è·¯å¾„

**MerchantDashboard.vue**:
```javascript
const productList = data.records.map(record => ({
  id: record.productId,
  productName: record.productName,
  imagePath: record.productImagePath || '',  // "images/xiaomi.png"
  // ...
}))

products.value = processProductImages(productList)
```

**imageHelper.js**:
```javascript
export function getImageUrl(imagePath) {
  // imagePath = "images/xiaomi.png"
  
  if (imagePath.startsWith('images/')) {
    return `/templates/${imagePath}`  // "/templates/images/xiaomi.png"
  }
  
  // ...
}
```

### 3. æ¸²æŸ“å›¾ç‰‡æ ‡ç­¾

```html
<img src="/templates/images/xiaomi.png" alt="å°ç±³æ‰‹æœº" />
```

### 4. æµè§ˆå™¨å‘èµ·è¯·æ±‚

```
GET http://127.0.0.1:3000/templates/images/xiaomi.png
```

### 5. Viteä»£ç†è½¬å‘

```javascript
// vite.config.js
'/templates': {
  target: 'http://localhost:8080',
  changeOrigin: true
}
```

è½¬å‘åˆ°:
```
GET http://localhost:8080/templates/images/xiaomi.png
```

### 6. åç«¯è¿”å›å›¾ç‰‡

Spring Booté™æ€èµ„æºé…ç½®è¿”å›å›¾ç‰‡æ–‡ä»¶

### 7. å›¾ç‰‡æ˜¾ç¤ºæˆåŠŸ âœ…

---

## ğŸ” æ•…éšœæ’æŸ¥

### å¦‚æœå›¾ç‰‡ä»ç„¶404

#### æ£€æŸ¥1: ç¡®è®¤åç«¯å›¾ç‰‡å­˜åœ¨

åœ¨æµè§ˆå™¨ç›´æ¥è®¿é—®åç«¯åœ°å€ï¼š
```
http://localhost:8080/templates/images/xiaomi.png
```

**å¦‚æœ404**: åç«¯å›¾ç‰‡æ–‡ä»¶ä¸å­˜åœ¨æˆ–è·¯å¾„é…ç½®é”™è¯¯
**å¦‚æœ200**: åç«¯æ­£å¸¸ï¼Œé—®é¢˜åœ¨å‰ç«¯ä»£ç†

---

#### æ£€æŸ¥2: ç¡®è®¤ä»£ç†é…ç½®ç”Ÿæ•ˆ

1. æŸ¥çœ‹ `vite.config.js` æ˜¯å¦åŒ…å« `/templates` ä»£ç†
2. ç¡®è®¤å·²é‡å¯å¼€å‘æœåŠ¡å™¨
3. æŸ¥çœ‹æµè§ˆå™¨Networkæ ‡ç­¾ï¼Œæ£€æŸ¥è¯·æ±‚æ˜¯å¦è¢«ä»£ç†

---

#### æ£€æŸ¥3: æ£€æŸ¥åç«¯é™æ€èµ„æºé…ç½®

**Spring Booté…ç½®** (é€šå¸¸åœ¨ `application.properties` æˆ– `application.yml`):

```properties
# é™æ€èµ„æºè·¯å¾„é…ç½®
spring.web.resources.static-locations=classpath:/static/,classpath:/templates/,file:./uploads/
```

æˆ–è€…åœ¨ä»£ç ä¸­é…ç½®:
```java
@Configuration
public class WebConfig implements WebMvcConfigurer {
    @Override
    public void addResourceHandlers(ResourceHandlerRegistry registry) {
        registry.addResourceHandler("/templates/**")
                .addResourceLocations("classpath:/templates/");
        registry.addResourceHandler("/images/**")
                .addResourceLocations("classpath:/static/images/");
    }
}
```

---

## âœ… éªŒæ”¶æ ‡å‡†

- [x] Viteé…ç½®æ·»åŠ  `/templates` ä»£ç†
- [ ] é‡å¯å¼€å‘æœåŠ¡å™¨
- [ ] å•†å“å›¾ç‰‡æ­£å¸¸æ˜¾ç¤º
- [ ] æµè§ˆå™¨æ§åˆ¶å°æ— 404é”™è¯¯
- [ ] Networkæ ‡ç­¾æ˜¾ç¤ºå›¾ç‰‡è¯·æ±‚200 OK

---

## ğŸ“ é‡è¦æé†’

### âš ï¸ å¿…é¡»é‡å¯å¼€å‘æœåŠ¡å™¨

ä¿®æ”¹ `vite.config.js` åï¼Œ**å¿…é¡»é‡å¯å¼€å‘æœåŠ¡å™¨**ï¼

### é‡å¯å‘½ä»¤

```bash
# 1. åœæ­¢å½“å‰æœåŠ¡å™¨ï¼ˆåœ¨è¿è¡Œnpm run devçš„ç»ˆç«¯ï¼‰
Ctrl+C

# 2. é‡æ–°å¯åŠ¨
npm run dev
```

### åˆ·æ–°æµè§ˆå™¨

```
Ctrl+F5  (å¼ºåˆ¶åˆ·æ–°ï¼Œæ¸…é™¤ç¼“å­˜)
```

---

**ä¿®å¤å®Œæˆæ—¶é—´**: 2025-10-15
**ä¿®å¤çŠ¶æ€**: âœ… é…ç½®å·²ä¿®æ”¹
**ä¸‹ä¸€æ­¥**: âš ï¸ **è¯·é‡å¯å¼€å‘æœåŠ¡å™¨å¹¶åˆ·æ–°æµè§ˆå™¨æµ‹è¯•ï¼**

---

## ğŸš€ å¿«é€Ÿä¿®å¤æ­¥éª¤

1. âœ… **å·²å®Œæˆ**: ä¿®æ”¹ `vite.config.js`ï¼Œæ·»åŠ  `/templates` ä»£ç†
2. â³ **å¾…æ‰§è¡Œ**: åœæ­¢å¼€å‘æœåŠ¡å™¨ï¼ˆ`Ctrl+C`ï¼‰
3. â³ **å¾…æ‰§è¡Œ**: é‡æ–°å¯åŠ¨ï¼ˆ`npm run dev`ï¼‰
4. â³ **å¾…æ‰§è¡Œ**: åˆ·æ–°æµè§ˆå™¨ï¼ˆ`Ctrl+F5`ï¼‰
5. â³ **å¾…æ‰§è¡Œ**: æ£€æŸ¥å›¾ç‰‡æ˜¯å¦æ­£å¸¸æ˜¾ç¤º

**è¯·æŒ‰ç…§ä¸Šè¿°æ­¥éª¤æ“ä½œï¼Œå›¾ç‰‡åº”è¯¥å°±èƒ½æ­£å¸¸æ˜¾ç¤ºäº†ï¼** ğŸ–¼ï¸

