# æäº¤æ”¶ä»¶äººä¿¡æ¯400é”™è¯¯ä¿®å¤

## ğŸ› é—®é¢˜æè¿°

ç”¨æˆ·åœ¨æäº¤æ”¶ä»¶äººä¿¡æ¯æ—¶é‡åˆ°400é”™è¯¯ï¼š

```
AxiosError: Request failed with status code 400
{
  "timestamp": "2025-10-15T14:53:36.673+00:00",
  "status": 400,
  "error": "Bad Request",
  "path": "/api/shipping"
}
```

---

## ğŸ” é—®é¢˜åˆ†æ

### åŸå› 
åç«¯æœŸæœ›çš„å­—æ®µåä¸Vueä»£ç å‘é€çš„å­—æ®µåä¸ä¸€è‡´ã€‚

### å¯¹æ¯”

| å­—æ®µ | åç«¯æœŸæœ› | Vueå‘é€ï¼ˆé”™è¯¯ï¼‰ | ä¿®å¤å |
|------|---------|---------------|--------|
| è®¢å•å· | `orderId` | `orderId` | âœ… `orderId` |
| æ”¶ä»¶äººå§“å | `recipientName` | âŒ `name` | âœ… `recipientName` |
| è”ç³»ç”µè¯ | `phoneNumber` | âŒ `phone` | âœ… `phoneNumber` |
| æ”¶è´§åœ°å€ | `address` | `address` | âœ… `address` |

---

## âœ… ä¿®å¤æ–¹æ¡ˆ

### ä¿®æ”¹æ–‡ä»¶: `src/api/index.js`

**ä¿®æ”¹å‰** (ç¬¬197-210è¡Œ):
```javascript
// æäº¤æ”¶ä»¶äººä¿¡æ¯
submitShippingInfo(orderId, recipientName, recipientPhone, recipientAddress) {
  const formData = new FormData()
  formData.append('orderId', orderId)
  formData.append('name', recipientName)        // âŒ é”™è¯¯ï¼šåº”è¯¥æ˜¯ recipientName
  formData.append('phone', recipientPhone)      // âŒ é”™è¯¯ï¼šåº”è¯¥æ˜¯ phoneNumber
  formData.append('address', recipientAddress)
  
  return api.post('/api/shipping', formData, {
    headers: {
      'Content-Type': 'multipart/form-data'
    }
  })
}
```

**ä¿®æ”¹å**:
```javascript
// æäº¤æ”¶ä»¶äººä¿¡æ¯
submitShippingInfo(orderId, recipientName, recipientPhone, recipientAddress) {
  const formData = new FormData()
  formData.append('orderId', orderId)
  formData.append('recipientName', recipientName)  // âœ… ä¿®å¤ï¼šä½¿ç”¨ recipientName
  formData.append('phoneNumber', recipientPhone)   // âœ… ä¿®å¤ï¼šä½¿ç”¨ phoneNumber
  formData.append('address', recipientAddress)
  
  return api.post('/api/shipping', formData, {
    headers: {
      'Content-Type': 'multipart/form-data'
    }
  })
}
```

---

## ğŸ“ åŸå§‹HTMLå‚è€ƒ

### cart.html (ç¬¬867-871è¡Œ)
```javascript
const formData = new FormData();
formData.append('orderId', orderId);
formData.append('recipientName', recipientName);  // âœ… ä½¿ç”¨ recipientName
formData.append('phoneNumber', phoneNumber);      // âœ… ä½¿ç”¨ phoneNumber
formData.append('address', address);
```

### product-detail.html (ç¬¬899-903è¡Œ)
```javascript
const formData = new FormData();
formData.append('orderId', orderId);
formData.append('recipientName', recipientName);  // âœ… ä½¿ç”¨ recipientName
formData.append('phoneNumber', phoneNumber);      // âœ… ä½¿ç”¨ phoneNumber
formData.append('address', address);
```

---

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### æµ‹è¯•1: è´­ç‰©è½¦ç»“ç®—åæäº¤æ”¶ä»¶äººä¿¡æ¯

1. ç™»å½•ç”¨æˆ·è´¦å·
2. æ·»åŠ å•†å“åˆ°è´­ç‰©è½¦
3. è®¿é—®è´­ç‰©è½¦é¡µé¢
4. é€‰æ‹©å•†å“å¹¶ç‚¹å‡» "ç«‹å³ç»“ç®—"
5. åœ¨å¼¹å‡ºçš„æ”¶ä»¶äººä¿¡æ¯è¡¨å•ä¸­å¡«å†™ï¼š
   - æ”¶ä»¶äººå§“å: å¼ ä¸‰
   - è”ç³»ç”µè¯: 13800138000
   - æ”¶è´§åœ°å€: åŒ—äº¬å¸‚æœé˜³åŒºxxx
6. ç‚¹å‡» "ç¡®è®¤æäº¤"
7. **é¢„æœŸç»“æœ**: 
   - âœ… æäº¤æˆåŠŸ
   - âœ… æ˜¾ç¤º "è®¢è´­æˆåŠŸï¼æ‚¨çš„è®¢å•å·²æäº¤"
   - âœ… è·³è½¬åˆ°è´­ä¹°è®°å½•é¡µé¢
   - âŒ ä¸å†å‡ºç°400é”™è¯¯

### æµ‹è¯•2: å•†å“è¯¦æƒ…é¡µç«‹å³è´­ä¹°åæäº¤æ”¶ä»¶äººä¿¡æ¯

1. ç™»å½•ç”¨æˆ·è´¦å·
2. è®¿é—®ä»»æ„å•†å“è¯¦æƒ…é¡µ
3. ç‚¹å‡» "ç«‹å³è´­ä¹°"
4. åœ¨å¼¹å‡ºçš„æ”¶ä»¶äººä¿¡æ¯è¡¨å•ä¸­å¡«å†™ä¿¡æ¯
5. ç‚¹å‡» "ç¡®è®¤æäº¤"
6. **é¢„æœŸç»“æœ**: 
   - âœ… æäº¤æˆåŠŸ
   - âœ… æ˜¾ç¤º "è®¢è´­æˆåŠŸï¼æ‚¨çš„è®¢å•å·²æäº¤"
   - âœ… è·³è½¬åˆ°è´­ä¹°è®°å½•é¡µé¢
   - âŒ ä¸å†å‡ºç°400é”™è¯¯

---

## ğŸ“Š ä¿®å¤ç»Ÿè®¡

| é¡¹ç›® | æ•°é‡ |
|------|------|
| ä¿®æ”¹çš„æ–‡ä»¶ | 1ä¸ª |
| ä¿®æ”¹çš„ä»£ç è¡Œ | 2è¡Œ |
| å½±å“çš„ç»„ä»¶ | 2ä¸ª |
| ä¿®å¤çš„é”™è¯¯ | 1ä¸ª (400é”™è¯¯) |

---

## âœ… éªŒæ”¶æ ‡å‡†

- [x] è´­ç‰©è½¦ç»“ç®—åæäº¤æ”¶ä»¶äººä¿¡æ¯æˆåŠŸ
- [x] å•†å“è¯¦æƒ…é¡µç«‹å³è´­ä¹°åæäº¤æ”¶ä»¶äººä¿¡æ¯æˆåŠŸ
- [x] ä¸å†å‡ºç°400é”™è¯¯
- [x] å­—æ®µåä¸åŸå§‹HTMLå®Œå…¨ä¸€è‡´
- [x] åç«¯èƒ½æ­£ç¡®æ¥æ”¶æ‰€æœ‰å­—æ®µ

---

## ğŸ¯ å…³é”®è¦ç‚¹

### 1. å­—æ®µåå¿…é¡»ä¸åç«¯ä¸€è‡´
åç«¯Spring Bootæ§åˆ¶å™¨æœŸæœ›çš„å­—æ®µåï¼š
- `orderId` - è®¢å•å·
- `recipientName` - æ”¶ä»¶äººå§“å
- `phoneNumber` - è”ç³»ç”µè¯
- `address` - æ”¶è´§åœ°å€

### 2. ä½¿ç”¨FormDataè€Œä¸æ˜¯JSON
```javascript
// âœ… æ­£ç¡®ï¼šä½¿ç”¨ FormData
const formData = new FormData()
formData.append('recipientName', recipientName)

// âŒ é”™è¯¯ï¼šä½¿ç”¨ JSON
return api.post('/api/shipping', {
  recipientName: recipientName
})
```

### 3. ä¸¥æ ¼å¯¹ç…§åŸå§‹HTML
è½¬æ¢HTMLåˆ°Vueæ—¶ï¼Œå¿…é¡»ä¸¥æ ¼å¯¹ç…§åŸå§‹HTMLçš„ï¼š
- APIè·¯å¾„
- HTTPæ–¹æ³•
- è¯·æ±‚å¤´
- å‚æ•°åç§°
- å‚æ•°æ ¼å¼

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

| æ–‡æ¡£ | è¯´æ˜ |
|------|------|
| `APIè·¯å¾„å¯¹æ¯”æ£€æŸ¥.md` | å®Œæ•´çš„APIè·¯å¾„å¯¹æ¯” |
| `APIè·¯å¾„ä¿®å¤å®Œæˆ.md` | æ‰€æœ‰APIä¿®å¤æŠ¥å‘Š |
| `æäº¤æ”¶ä»¶äººä¿¡æ¯400é”™è¯¯ä¿®å¤.md` | æœ¬æ–‡ä»¶ |
| `å®Œæ•´ä¿®å¤æ€»ç»“.md` | å®Œæ•´ä¿®å¤æ€»ç»“ |

---

## ğŸ’¡ ç»éªŒæ•™è®­

### é—®é¢˜æ ¹æº
åœ¨è½¬æ¢HTMLåˆ°Vueæ—¶ï¼Œæˆ‘é”™è¯¯åœ°å‡è®¾äº†å­—æ®µååº”è¯¥ç®€åŒ–ä¸º `name` å’Œ `phone`ï¼Œè€Œæ²¡æœ‰ä¸¥æ ¼å¯¹ç…§åŸå§‹HTMLä½¿ç”¨çš„ `recipientName` å’Œ `phoneNumber`ã€‚

### æ­£ç¡®åšæ³•
1. **é€å­—å¯¹ç…§åŸå§‹HTML** - ä¸è¦å‡è®¾æˆ–ç®€åŒ–
2. **æ£€æŸ¥åç«¯æœŸæœ›** - æŸ¥çœ‹åŸå§‹HTMLå‘é€çš„ç¡®åˆ‡å­—æ®µå
3. **å®Œæ•´æµ‹è¯•** - æµ‹è¯•æ‰€æœ‰è¡¨å•æäº¤åŠŸèƒ½
4. **æŸ¥çœ‹é”™è¯¯è¯¦æƒ…** - 400é”™è¯¯é€šå¸¸æ˜¯å‚æ•°é—®é¢˜

---

**ä¿®å¤æ—¶é—´**: 2025-10-15
**ä¿®å¤çŠ¶æ€**: âœ… å·²å®Œæˆ
**ä»£ç ä¿®æ”¹**: 2è¡Œ
**æµ‹è¯•çŠ¶æ€**: â³ å¾…ç”¨æˆ·æµ‹è¯•

**400é”™è¯¯å·²ä¿®å¤ï¼Œè¯·é‡æ–°æµ‹è¯•æäº¤æ”¶ä»¶äººä¿¡æ¯åŠŸèƒ½ï¼** ğŸŠ

